@model ComparisonViewModel
@{
    ViewData["Title"] = "Comparison";
}

<style>
</style>

<script>
    //$(document).ready(function () {
    //    $("#lproductName")
    //})
    function rfindSimilar() {
        var str = $("#rproductName").val();
        var products = @CatalogViewModel.ListOfProducts;
        @*@{
            @CatalogViewModel.AutocompleteProduct($("#rproductName").val());

        }*@
    }
    function lfindSimilar() {
        var str = $("#lproductName").val();
        //alert(str);
    }

    //! here will be js code for handling autocompletion on search
    //$(document).ready(function () {
    //    $("#CityName").autocomplete({
    //        source: function (request, response) {
    //            $.ajax({
    //                url: "/Home/Index",
    //                type: "POST",
    //                dataType: "json",
    //                data: { Prefix: request.term },
    //                success: function (data) {
    //                    response($.map(data, function (item) {
    //                        return { label: item.CityName, value: item.CityName };
    //                    }))

    //                }
    //            })
    //        },
    //        messages: {
    //            noResults: "", results: ""
    //        }
    //    });
    //}) 

</script>
<form asp-controller="Comparison" asp-area="" asp-action="FindProducts" method="post">
    <div class="form-group">
        <label for="lproductName">Left product name</label>
        <input type="text" class="form-control" name="lproductName" id="lproductName" placeholder="Enter product name" value="" onchange="rfindSimilar()" required />
    </div>
    <div class="form-group">
        <label for="rproductName">Right product name</label>
        <input type="text" class="form-control" name="rproductName" id="rproductName" placeholder="Enter product name" value="" @*onchange="lfindSimilar()"*@ required />
    </div>
    <button class="btn btn-primary" type="submit">Find</button>
</form>
<br>
<div class="container-fluid">
    <div class="row row-cols-1 row-cols-md-3">
        <br>
        @{
            var leftProduct = ComparisonViewModel.LeftProduct;
            var rightProduct = ComparisonViewModel.RightProduct;

            if (leftProduct != null && rightProduct != null)
            {
                <div class="col col-lg-4" style="padding-bottom: 2rem;">
                    <div class="card h-100 hoverable-card" id="card_on_transaction">
                        <div class="card-header @leftProduct.GetTableHeaderClassString()" id="card_on_transaction_header">
                            <h5 style="font-weight:300">@leftProduct.Type</h5>
                        </div>
                        <div style="transform:rotate(0);">
                            @*<a href="@product.Link" class="stretched-link">
                                    <img src="@product.GetCardImageSrc()" alt="Cat Lawyer Is Real And He Is Everything Right Now | Above the Law" class="card-img-top">
                                </a>*@
                            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                                <ol class="carousel-indicators">
                                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                                </ol>
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img class="d-block w-100" src="@leftProduct.GetFirstImageSrc()" alt="First slide">
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="@leftProduct.GetSecondImageSrc()" alt="Second slide">
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="@leftProduct.GetThirdImageSrc()" alt="Third slide">
                                    </div>
                                </div>
                                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </div>
                        <div class="card-body" style="transform:rotate(0);">
                            <h4 class="card-title">
                                @leftProduct.Name
                            </h4>
                            <div class="overflower" aria-hidden="true">
                                <p class="card-text card-description">@leftProduct.Description</p>
                            </div>

                            @*<a href="@product.Link" class="stretched-link"></a>*@
                        </div>

                        <div class="card-footer @leftProduct.GetTableHeaderClassString()" id="card_on_transaction_footer">

                            @*<div class="float-right">*@
                            <h3>
                                @leftProduct.FinalPriceString
                                <sup>
                                    @if (leftProduct.Price != leftProduct.FinalPrice)
                                    {
                                        <font color="red" style="font-weight:400"><del>@leftProduct.PriceString</del></font><sup> -@leftProduct.DiscountSupString</sup>
                                    }
                                </sup>
                            </h3>
                            <br>
                            <small class="text-warning @leftProduct.GetProductTableLinkClassString()">
                                Added @leftProduct.AddedDate.ToShortDateString()
                            </small>

                        </div>
                    </div>
                </div>
                <div class="col col-lg-4" style="text-align:center">
                    <div class="card text-white bg-dark h-100">
                        <div class="card-header">Comparison</div>
                        <div class="card-body">
                            <h5 class="card-title">Briefly</h5>
                            <p class="card-text">@ComparisonViewModel.PriceComparisonText()</p>
                            <p class="card-text">@ComparisonViewModel.DiscountComparisonText()</p>
                            <p class="card-text">@ComparisonViewModel.AddedDateComparisonText()</p>
                            <h5 class="card-title">Comments</h5>
                            <p class="card-text">Some comments</p>
                            <h5 class="card-title">Conclusion</h5>
                            <p class="card-text">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col col-lg-4" style="padding-bottom: 2rem;">
                    <div class="card h-100 hoverable-card" id="card_on_transaction">
                        <div class="card-header @rightProduct.GetTableHeaderClassString()" id="card_on_transaction_header">
                            <h5 style="font-weight:300">@rightProduct.Type</h5>
                        </div>
                        <div style="transform:rotate(0);">
                            @*<a href="@rightProduct.Link" class="stretched-link">
                                    <img src="@rightProduct.GetCardImageSrc()" alt="Cat Lawyer Is Real And He Is Everything Right Now | Above the Law" class="card-img-top">
                                </a>*@
                            <div id="carouselExampleIndicators2" class="carousel slide" data-ride="carousel">
                                <ol class="carousel-indicators">
                                    <li data-target="#carouselExampleIndicators2" data-slide-to="0" class="active"></li>
                                    <li data-target="#carouselExampleIndicators2" data-slide-to="1"></li>
                                    <li data-target="#carouselExampleIndicators2" data-slide-to="2"></li>
                                </ol>
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img class="d-block w-100" src="@rightProduct.GetFirstImageSrc()" alt="First slide">
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="@rightProduct.GetSecondImageSrc()" alt="Second slide">
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="@rightProduct.GetThirdImageSrc()" alt="Third slide">
                                    </div>
                                </div>
                                <a class="carousel-control-prev" href="#carouselExampleIndicators2" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carouselExampleIndicators2" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </div>
                        <div class="card-body" style="transform:rotate(0);">
                            <h4 class="card-title">
                                @rightProduct.Name
                            </h4>
                            <div class="overflower" aria-hidden="true">
                                <p class="card-text card-description">@rightProduct.Description</p>
                            </div>

                            @*<a href="@rightProduct.Link" class="stretched-link"></a>*@
                        </div>

                        <div class="card-footer @rightProduct.GetTableHeaderClassString()" id="card_on_transaction_footer">

                            @*<div class="float-right">*@
                            <h3>
                                @rightProduct.FinalPriceString
                                <sup>
                                    @if (rightProduct.Price != rightProduct.FinalPrice)
                                    {
                                        <font color="red" style="font-weight:400"><del>@rightProduct.PriceString</del></font><sup> -@rightProduct.DiscountSupString</sup>
                                    }
                                </sup>
                            </h3>
                            <br>
                            <small class="text-warning @rightProduct.GetProductTableLinkClassString()">
                                Added @rightProduct.AddedDate.ToShortDateString()
                            </small>

                        </div>
                    </div>
                </div>
                <hr>
                <div class="col col-lg-6" style="padding-top: 2rem;">
                    <div class="card h-100 hoverable-card" id="card_on_transaction">
                        <div class="card-header @leftProduct.GetTableHeaderClassString()" id="card_on_transaction_header">
                            <h5 style="font-weight:300">What people think about <strong>@leftProduct.Name</strong></h5>
                        </div>
                        <div class="card-body" style="transform:rotate(0);">
                            @{
                                if (leftProduct.Comments != null)
                                {
                                    foreach (var comment in leftProduct.Comments)
                                    {
                                        <p><strong>@comment.UserID</strong></p>
                                        <p>@comment.Text</p>
                                    }
                                }
                            }
                        </div>

                    </div>
                </div>
                <div class="col col-lg-6" style="padding-top: 2rem;">
                    <div class="card h-100 hoverable-card" id="card_on_transaction">
                        <div class="card-header @rightProduct.GetTableHeaderClassString()" id="card_on_transaction_header">
                            <h5 style="font-weight:300">What people think about <strong>@rightProduct.Name</strong></h5>
                        </div>
                        <div class="card-body" style="transform:rotate(0);">
                        </div>

                    </div>
                </div>
            }
        }
    </div>
</div>


